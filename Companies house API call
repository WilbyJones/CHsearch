import requests # type: ignore

def get_filing_history(company_number, transaction_id, api_key):
    url = f"https://api.company-information.service.gov.uk/company/{company_number}/filing-history/{transaction_id}"
    headers = {
        "Authorization": f"Basic {api_key}"
    }
    response = requests.get(url, headers=headers)
    if response.status_code == 200:
        data = response.json()
        company_info = {
            "company_number": data.get("company_number"),
            "accounts_filing_date": data.get("accounts", {}).get("next_due")
        }
        return company_info
    else:
        return {"error": "Company not found or invalid API key"}
    